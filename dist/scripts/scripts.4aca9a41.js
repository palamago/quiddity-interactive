"use strict";angular.module("quiddityInteractiveApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","socialLinks"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]).service("TabletopService",["$q",function(a){this.data=!1,this.getData=function(){var b=this;return a(function(a,c){b.data?a({data:b.data}):(b.loading=!0,Tabletop.init({key:"1gJSWmiZoGJRiE3Ol6wxM1xWFrfHYUboDa6EkzZUgUZQ",callback:function(c,d){b.data={},angular.forEach(d.foundSheetNames,function(a){b.data[a]=c[a].elements.filter(function(a){return 1!=a.id}),b.data[a]=b.data[a].sort(function(a,b){return parseFloat(a.total)<parseFloat(b.total)})}),a({data:b.data})},simpleSheet:!1,postProcess:function(a){return a.tema=a.tema.replace("Evaluación gestión en ",""),a.total=parseFloat(a.total.replace(",",".")),a.apruebamucho=parseFloat(a.apruebamucho.replace(",",".")),a.apruebapoco=parseFloat(a.apruebapoco.replace(",",".")),a.desapruebamucho=parseFloat(a.desapruebamucho.replace(",",".")),a.desapruebapoco=parseFloat(a.desapruebapoco.replace(",",".")),a.nsnc=parseFloat(a.nsnc.replace(",",".")),a}}))})}}]),angular.module("quiddityInteractiveApp").controller("MainCtrl",["$scope","TabletopService","$timeout","$location",function(a,b,c,d){function e(a){switch(a){case"otro-massa":case"otro-stolbizer":case"otro-del-cano":case"otro-saa":return"otro";default:return a}}a.charts={},a.chartData={},a.loading=!0,a.temas={oposicion:{aprueba:0,desaprueba:0},base:{aprueba:0,desaprueba:0},confianza:{aprueba:0,desaprueba:0},desconfianza:{aprueba:0,desaprueba:0},total:0},b.getData().then(function(b){a.data=b.data,angular.forEach(a.data,function(b,c){a.temas.total=b.length,angular.forEach(b,function(b){b.total>=0?a.temas[c].aprueba++:a.temas[c].desaprueba++,a.chartData[c+"-"+b.id+"-chart"]=b})}),c(function(){$('[data-toggle="tooltip"]').tooltip(),a.createCharts(),a.loading=!1},1e3)}),a.category={"macri-macri":"base","scioli-scioli":"oposicion","otro-scioli":"desconfianza","blanco-scioli":"desconfianza","macri-scioli":"desconfianza","blanco-blanco":"desconfianza","otro-blanco":"desconfianza","macri-blanco":"desconfianza","scioli-blanco":"desconfianza","otro-macri":"confianza","scioli-macri":"confianza","blanco-macri":"confianza"},a.primera=null,a.segunda=null,a.selectPrimera=function(b,c){a.primera=e(c),a.primera_selection=c,angular.element(".option-primera").removeAttr("disabled"),b.currentTarget.disabled="disabled",a.primera&&a.segunda&&a.updateCharts()},a.selectSegunda=function(b,c){a.segunda=e(c),angular.element(".option-segunda").removeAttr("disabled"),b.currentTarget.disabled="disabled",a.primera&&a.segunda&&a.updateCharts()},a.rendered=!1,a.updateCharts=function(){a.rendered||(a.rendered=!0,angular.element(".chart-to-render").each(function(b,d){var e=a.charts[d.id];c(function(){e.load({columns:[[d.id,a.chartData[d.id].total]]})},500*b)}))},a.createCharts=function(){var b=$(".col-md-3#example-width .col-xs-12").width();$(".chart-to-render").each(function(c,d){a.charts[d.id]=c3.generate({bindto:"#"+d.id,size:{height:50,width:b},data:{columns:[[d.id,0]],type:"bar",color:function(a,b){var c=d3.scale.threshold().range(["#d9534f","#e99184","#e2b9a2","#c7cca6","#9bcc8e","#5cb85c"]).domain([-150,-50,0,50,150]);return c(b.value)}},axis:{rotated:!0,x:{show:!1},y:{show:!1,min:-200,max:-200,center:0}},grid:{y:{lines:[{value:0,text:""}]}},legend:{show:!1},tooltip:{contents:function(b,c,d,e){var f,g,h,i=this,j=i.config,k=(j.tooltip_format_title||c,j.tooltip_format_name||function(a){return a},j.tooltip_format_value||d,a.chartData[b[0].id]);f||(f="<table class='"+i.CLASS.tooltip+"'><tr><th colspan='2'>"+k.tema+"</th></tr>"),g="millones",h="red";var l={desaprueba_mucho:"#ff0000",desaprueba_poco:"#c05e00",aprueba_poco:"#7f7500",aprueba_mucho:"#008000",ns_nc:"#CCC"};return f+="<tr class='"+i.CLASS.tooltipName+"-"+b[0].id+"'>",f+=" <td class='name'><span style='background-color:"+l.aprueba_mucho+"'></span>Aprueba Mucho</td>",f+=" <td class='value'>"+k.aprueba_mucho.toFixed(2)+"%</td>",f+="</tr>",f+="<tr class='"+i.CLASS.tooltipName+"-"+b[0].id+"'>",f+=" <td class='name'><span style='background-color:"+l.aprueba_poco+"'></span>Aprueba</td>",f+=" <td class='value'>"+k.aprueba_poco.toFixed(2)+"%</td>",f+="</tr>",f+="<tr class='"+i.CLASS.tooltipName+"-"+b[0].id+"'>",f+=" <td class='name'><span style='background-color:"+l.desaprueba_poco+"'></span>Desaprueba</td>",f+=" <td class='value'>"+k.desaprueba_poco.toFixed(2)+"%</td>",f+="</tr>",f+="<tr class='"+i.CLASS.tooltipName+"-"+b[0].id+"'>",f+=" <td class='name'><span style='background-color:"+l.desaprueba_mucho+"'></span>Desaprueba Mucho</td>",f+=" <td class='value'>"+k.desaprueba_mucho.toFixed(2)+"%</td>",f+="</tr>",f+="<tr class='"+i.CLASS.tooltipName+"-"+b[0].id+"'>",f+=" <td class='name'><span style='background-color:"+l.ns_nc+"'></span>No sabe / No contesta</td>",f+=" <td class='value'>"+k.ns_nc.toFixed(2)+"%</td>",f+="</tr>",f+"</table>"}}})})}}]),angular.module("quiddityInteractiveApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("quiddityInteractiveApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="row"> <div class="col-xs-12"> <h1 class="text-center">¿Qué piensan aquellos que votaron como yo?</h1> <h2 class="text-center"><small>(Encuesta de Quiddity en el área metropolitana de Buenos Aires)</small></h2> <p class="lead">Tras cinco meses de nuevo gobierno, el 53% de los votantes aprueba la gestión de Macri y el 61% espera que la economía mejorará en el próximo año. Los votantes valoran algunos logros del gobierno, como la relación con otros países, el combate a la corrupción y la lucha contra el narcotráfico. Sin embargo, una mayoría desaprueba la actuación del gobierno para reducir la pobreza, controlar la inflación y crear empleo. Solo 3 de cada 10 votantes creen su economía personal mejorará en el próximo año.</p> <p class="lead">Hasta acá, lo que piensan los residentes del área metropolitana de Buenos Aires. Pero ¿qué piensan los que votaron como vos?</p> </div> </div> <div class="row" ng-hide="loading"> <div class="col-md-6"> <h2>¿A quién votaste en primera vuelta?</h2> <button class="btn btn-default option-primera macri" ng-class="{active:primera_selection==\'macri\'}" ng-click="selectPrimera($event,\'macri\')">Macri</button> <button class="btn btn-default option-primera scioli" ng-class="{active:primera_selection==\'scioli\'}" ng-click="selectPrimera($event,\'scioli\')">Scioli</button> <button class="btn btn-default option-primera otro-massa" ng-class="{active:primera_selection==\'otro-massa\'}" ng-click="selectPrimera($event,\'otro-massa\')">Massa</button> <button class="btn btn-default option-primera otro-stolbizer" ng-class="{active:primera_selection==\'otro-stolbizer\'}" ng-click="selectPrimera($event,\'otro-stolbizer\')">Stolbizer</button> <button class="btn btn-default option-primera otro-del-cano" ng-class="{active:primera_selection==\'otro-del-cano\'}" ng-click="selectPrimera($event,\'otro-del-cano\')">Del Caño</button> <button class="btn btn-default option-primera otro-saa" ng-class="{active:primera_selection==\'otro-saa\'}" ng-click="selectPrimera($event,\'otro-saa\')">Rodríguez Saa</button> <button class="btn btn-default option-primera blanco" ng-class="{active:primera_selection==\'blanco\'}" ng-click="selectPrimera($event,\'blanco\')">Blanco/Anulado</button> </div> <div class="col-md-6"> <h2>¿Y en el Ballotage?</h2> <button class="btn btn-default option-segunda macri" ng-class="{active:segunda==\'macri\'}" ng-click="selectSegunda($event,\'macri\')">Macri</button> <button class="btn btn-default option-segunda scioli" ng-class="{active:segunda==\'scioli\'}" ng-click="selectSegunda($event,\'scioli\')">Scioli</button> <button class="btn btn-default option-segunda blanco" ng-class="{active:segunda==\'blanco\'}" ng-click="selectSegunda($event,\'blanco\')">Blanco/Anulado</button> </div> </div> <hr> <p ng-show="loading" class="text-center"><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i></p> <div ng-show="primera && segunda"> <div class="row"> <div class="col-xs-12"> <p ng-show="category[primera+\'-\'+segunda]==\'base\'" class="lead"> Votaste dos veces a <strong>Macri</strong>. Digamos que sos <strong>oficialista</strong>, como el 31% de los encuestados. La mayoría de los que votaron como vos aprueban <strong>{{temas.base.aprueba}} de los {{temas.total}} temas</strong> relevados y creen que la economía <strong>mejorará</strong>. Entre los <strong>oficialistas</strong>, las políticas mejor evaluadas son las de <strong>{{data[category[primera+\'-\'+segunda]][0].tema}}</strong>, <strong>{{data[category[primera+\'-\'+segunda]][1].tema}}</strong> y <strong>{{data[category[primera+\'-\'+segunda]][2].tema}}</strong>. Pero no todo pinta bien. Las políticas peor evaluadas son las de <strong>{{data[category[primera+\'-\'+segunda]][9].tema}}</strong>, <strong>{{data[category[primera+\'-\'+segunda]][8].tema}}</strong> y <strong>{{data[category[primera+\'-\'+segunda]][7].tema}}</strong>. </p> <p ng-show="category[primera+\'-\'+segunda]==\'confianza\'" class="lead"> No votaste a <strong>Macri</strong> en la primera vuelta pero sí en el ballottage. Digamos que el actual gobierno algo te <strong>entusiasma</strong>, como al 17% de los encuestados. La mayoría de los que votaron como vos aprueban <strong>{{temas.confianza.aprueba}} de los {{temas.total}} temas</strong> relevados y creen que la economía <strong>mejorará</strong>. Entre los <strong>entusiastas</strong>, las políticas mejor evaluadas son las de <strong>{{data[category[primera+\'-\'+segunda]][0].tema}}</strong>, <strong>{{data[category[primera+\'-\'+segunda]][1].tema}}</strong> y <strong>{{data[category[primera+\'-\'+segunda]][2].tema}}</strong>. Pero no todo pinta bien. Las políticas peor evaluadas son las de <strong>{{data[category[primera+\'-\'+segunda]][9].tema}}</strong>, <strong>{{data[category[primera+\'-\'+segunda]][8].tema}}</strong> y <strong>{{data[category[primera+\'-\'+segunda]][7].tema}}</strong>. </p> <p class="lead" ng-show="category[primera+\'-\'+segunda]==\'desconfianza\'"> No votaste a <strong>Scioli</strong> en primera vuelta pero sí en la segunda (o votaste en blanco). Digamos que el actual gobierno te provoca al menos <strong>escepticismo</strong>, como al 22% de los encuestados. La mayoría de los que votaron como vos desaprueban <strong>{{temas.desconfianza.desaprueba}} de los {{temas.total}} temas</strong> relevados y creen que la economía <strong>empeorará</strong>. Entre los <strong>escépticos</strong>, las políticas peor evaluadas son las de <strong>{{data[category[primera+\'-\'+segunda]][9].tema}}</strong>, <strong>{{data[category[primera+\'-\'+segunda]][8].tema}}</strong> y <strong>{{data[category[primera+\'-\'+segunda]][7].tema}}</strong>. Pero no todo pinta mal. Las políticas mejor evaluadas son las de <strong>{{data[category[primera+\'-\'+segunda]][0].tema}}</strong>, <strong>{{data[category[primera+\'-\'+segunda]][1].tema}}</strong> y <strong>{{data[category[primera+\'-\'+segunda]][2].tema}}</strong>. </p> <p class="lead" ng-show="category[primera+\'-\'+segunda]==\'oposicion\'"> Votaste dos veces a <strong>Scioli</strong>. Digamos que sos <strong>opositor</strong>, como el 30% de los encuestados. La mayoría de los que votaron como vos desaprueban <strong>{{temas.oposicion.desaprueba}} de los {{temas.total}} temas</strong> relevados y creen que la economía <strong>empeorará</strong>. Entre los opositores, las políticas peor evaluadas son las de <strong>{{data[category[primera+\'-\'+segunda]][9].tema}}</strong>, <strong>{{data[category[primera+\'-\'+segunda]][8].tema}}</strong> y <strong>{{data[category[primera+\'-\'+segunda]][7].tema}}</strong>. Pero no todo pinta mal. Las políticas mejor evaluadas son las de <strong>{{data[category[primera+\'-\'+segunda]][0].tema}}</strong>, <strong>{{data[category[primera+\'-\'+segunda]][1].tema}}</strong> y <strong>{{data[category[primera+\'-\'+segunda]][2].tema}}</strong>. </p> </div> </div> <hr> <div class="row"> <h2 class="text-center">¿Cuáles son las políticas del gobierno MEJOR evaluadas por cada grupo?</h2> <div class="col-md-3"> <h3 data-toggle="tooltip" data-placement="top" title="Votaron a Macri en primera y segunda vuelta" class="text-center">Oficialistas <small ng-show="category[primera+\'-\'+segunda]==\'base\'"><span class="label label-default">VOS</span></small></h3> <div class="row"> <div class="col-xs-12 text-center" ng-repeat="t in data.base | limitTo:3"> {{t.tema}} <div id="base-{{t.id}}-chart" class="chart-to-render"></div> <hr> </div> </div> </div> <div class="col-md-3"> <h3 data-toggle="tooltip" data-placement="top" title="No votaron a Macri en la primera vuelta pero sí en la segunda" class="text-center">Entusiastas <small ng-show="category[primera+\'-\'+segunda]==\'confianza\'"><span class="label label-default">VOS</span></small></h3> <div class="row"> <div class="col-xs-12 text-center" ng-repeat="t in data.confianza | limitTo:3"> {{t.tema}} <div id="confianza-{{t.id}}-chart" class="chart-to-render"></div> <hr> </div> </div> </div> <div class="col-md-3"> <h3 data-toggle="tooltip" data-placement="top" title="No votaron a Scioli en la primera vuelta pero sí en la segunda (o votaron en blanco)" class="text-center">Escépticos <small ng-show="category[primera+\'-\'+segunda]==\'desconfianza\'"><span class="label label-default">VOS</span></small></h3> <div class="row"> <div class="col-xs-12 text-center" ng-repeat="t in data.desconfianza | limitTo:3"> {{t.tema}} <div id="desconfianza-{{t.id}}-chart" class="chart-to-render"></div> <hr> </div> </div> </div> <div class="col-md-3"> <h3 data-toggle="tooltip" data-placement="top" title="Votaron a Scioli en primera y segunda vuelta" class="text-center">Opositores <small ng-show="category[primera+\'-\'+segunda]==\'oposicion\'"><span class="label label-default">VOS</span></small></h3> <div class="row"> <div class="col-xs-12 text-center" ng-repeat="t in data.oposicion | limitTo:3"> {{t.tema}} <div id="oposicion-{{t.id}}-chart" class="chart-to-render"></div> <hr> </div> </div> </div> </div> <hr> <div class="row"> <h2 class="text-center">¿Cuáles son las políticas del gobierno PEOR evaluadas por cada grupo?</h2> <div class="col-md-3"> <h3 data-toggle="tooltip" data-placement="top" title="Votaron a Macri en primera y segunda vuelta" class="text-center">Oficialistas <small ng-show="category[primera+\'-\'+segunda]==\'base\'"><span class="label label-default">VOS</span></small></h3> <div class="row"> <div class="col-xs-12 text-center" ng-repeat="t in data.base | orderBy:\'total\' | limitTo:3"> {{t.tema}} <div id="base-{{t.id}}-chart" class="chart-to-render"></div> <hr> </div> </div> </div> <div class="col-md-3"> <h3 data-toggle="tooltip" data-placement="top" title="No votaron a Macri en la primera vuelta pero sí en la segunda" class="text-center">Entusiastas <small ng-show="category[primera+\'-\'+segunda]==\'confianza\'"><span class="label label-default">VOS</span></small></h3> <div class="row"> <div class="col-xs-12 text-center" ng-repeat="t in data.confianza | orderBy:\'total\' | limitTo:3"> {{t.tema}} <div id="confianza-{{t.id}}-chart" class="chart-to-render"></div> <hr> </div> </div> </div> <div class="col-md-3"> <h3 data-toggle="tooltip" data-placement="top" title="No votaron a Scioli en la primera vuelta pero sí en la segunda (o votaron en blanco)" class="text-center">Escépticos <small ng-show="category[primera+\'-\'+segunda]==\'desconfianza\'"><span class="label label-default">VOS</span></small></h3> <div class="row"> <div class="col-xs-12 text-center" ng-repeat="t in data.desconfianza | orderBy:\'total\' | limitTo:3"> {{t.tema}} <div id="desconfianza-{{t.id}}-chart" class="chart-to-render"></div> <hr> </div> </div> </div> <div class="col-md-3"> <h3 data-toggle="tooltip" data-placement="top" title="Votaron a Scioli en primera y segunda vuelta" class="text-center">Opositores <small ng-show="category[primera+\'-\'+segunda]==\'oposicion\'"><span class="label label-default">VOS</span></small></h3> <div class="row"> <div class="col-xs-12 text-center" ng-repeat="t in data.oposicion | orderBy:\'total\' | limitTo:3"> {{t.tema}} <div id="oposicion-{{t.id}}-chart" class="chart-to-render"></div> <hr> </div> </div> </div> </div> <hr> <div class="row"> <div class="col-md-3 col-xs-12"> <h3 class="text-center">Compartir <i class="glyphicon glyphicon-chevron-right"></i></h3> </div> <div class="col-md-3 col-xs-4 text-center"> <a href="javascript:;" social-twitter status="¿Querés saber cómo piensan los que votaron como vos? vía @quidditydata"><i class="fa fa-twitter fa-4x" aria-hidden="true"></i></a> </div> <div class="col-md-3 col-xs-4 text-center"> <a href="javascript:;" social-facebook><i class="fa fa-facebook fa-4x" aria-hidden="true"></i></a> </div> <div class="col-md-3 col-xs-4 text-center"> <a href="javascript:;" social-gplus><i class="fa fa-google-plus fa-4x" aria-hidden="true"></i></a> </div> </div> </div> <hr> <div class="row"> <div id="example-width" class="col-md-3"> <div class="row"> <div class="col-xs-12"> </div> </div> </div> </div> <div class="row"> <div class="col-md-12"> <p class="text-center">En Quiddity hacemos investigación de opinión pública y análisis de grandes bases de datos para diseñar estrategias al servicio de nuestros clientes.</p> <p class="text-center"> <a href="mailto:info@quiddity.info">info@quiddity.info</a> | <a href="https://www.facebook.com/QuiddityData/" target="_blank">Facebook</a> | <a href="https://twitter.com/quidditydata/" target="_blank">@quidditydata</a> | +54 11 5263 2313 </p> </div> </div> <hr>')}]);